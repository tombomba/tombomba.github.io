---
style: homepage
is_home: true
permalink: /index.html
---
<article>
{% for p in site.posts limit: 7 %}
  {% assign wc = p.excerpt | number_of_words | times: 1 -%}
  <section>
    {% assign blurb = p.excerpt | strip | strip_html | normalize_whitespace | smartify -%}
    {% if p.fbog.match %}
      {% assign keyphrase = p.fbog.match | strip | normalize_whitespace | smartify %}
    {% else %}
      {% assign keyphrase = blurb | truncatewords: 3, '' | smartify %}
    {% endif -%}
    {% capture link %}<a href="{{ p.url | prepend: site.url }}">{{ keyphrase }}</a>{% endcapture -%}
    {% unless forloop.first %}<div class="hr"></div>{% endunless -%}
    <div class="promo card"><!-- {{ wc }} -->
      {% assign modu = forloop.index | modulo: 2 %}
      {% if p.fbog.image and modu > 0 and wc > 40 %}
        {% if wc > 60 %}
          {% assign thumb_size = 'large' %}
        {% elsif wc > 50 %}
          {% assign thumb_size = 'medium' %}
        {% else %}
          {% assign thumb_size = 'small' %}
        {% endif -%}
        {% capture wtf %}{% cycle 'right', 'left' %}{% endcapture -%}
        <div class="thumb {{ thumb_size }} {{ wtf }}" style="background-image: url({{ p.fbog.image | prepend: site.ico_dir | prepend: site.url }})"><a href="{{ include.item.url | prepend: site.url }}" aria-label="thumbnail image"><span></span></a></div>
      {% endif -%}
      <div class="text">
        <p>{{ blurb | replace_first: keyphrase, link }} ({{wc}})</p>
      </div>
    </div>
  </section>
{% endfor -%}
</article>

<aside class="archive">
  <div class="hr"></div>
  <ul class="datelist">
    {% assign curryr = site.posts.first.date | date: '%Y' -%}
    {% assign currmo = site.posts.first.date | date: '%-m' -%}
    {% assign startmo = currmo | minus: 4 -%}
    {% assign prevyr = '' -%}
    {% for i in (startmo..currmo) %}
      {% assign month = i -%}
      {% if 1 > month %}
        {% assign month = month | plus: 12 %}
        {% assign year = curryr | minus: 1 %}
      {% else %}
        {% assign year = curryr %}
      {% endif -%}
      {% capture datestring %}1999-{{ month }}-01{% endcapture -%}
      {% if year != prevyr %}
        <li class="year"><a href="/{{ year }}/">{{ year }}</li>
      {% endif -%}
      <li><a href="{{ site.url }}/{{ year }}/{% if 9 > month %}0{% endif %}{{ month }}/">{{ datestring | date: '%b' }}</a></li>
      {% assign prevyr = year -%}
    {% endfor -%}
  </ul>
</aside>
