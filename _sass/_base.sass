/*
  Base styles for every page:
    - header
    - footer
    - most margins
    - pagebreak delimiter for homepage

// Mixins
@function bem($size: 1, $context: $line-height)
  @return ($size * $context) * 1em

@mixin font-ratio($size: 1, $context: $line-height)
    font-size: percentage($size)
    line-height: $context / $size

// Max column width
$max-width: 34em
$line-height: (30/18)

// Colors
$body-color:    #F3F3F3 !default
$text-color:    #161616 !default

$border-dark:   #D9D9D9 !default
$border-light:  #FFF !default

$key: random(6)
$one-color: #06f, #c06, #393, #f30, #09f, #099
$two-color: #6ff, #fc0, #9f0, #fc0, #9f3, #fc0

$logo-color: nth($one-color, $key)
$shock-color:   nth($two-color, $key)
$select-color:  $shock-color
// foo!

$mix-color:     mix($body-color, $text-color, 50%) !default
$light-mix:     lighten($mix-color, 20%) !default
$dark-mix:      darken($mix-color, 20%) !default

$link-color:    #36C !default
$visited-color: #939 !default
$active-color:  #F30 !default

// Fonts
$serif: Georgia, Cambria, 'Century Schoolbook L', serif
$sans:  Verdana, 'Bitstream Vera Sans', Geneva, sans-serif
$system: -apple-system, BlinkMacSystemFont, 'Segoe UI', Helvetica, Arial, sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol'
$titlef: 'Bungee', $sans

//-----------------------------------------------------------------------------

html
  box-sizing: border-box

*, *:before, *:after
  box-sizing: inherit

@-ms-viewport
  width: device-width

body
  background-color: $body-color
  color: $text-color

  text-rendering: optimizeSpeed
  -ms-text-size-adjust: auto
  -webkit-text-size-adjust: auto

  padding: 0 1em

ul, ol
  margin-left: bem(1)

ul
  list-style-type: disc

a
  text-decoration: underline
  text-decoration-skip-ink: auto
  &:link
    color: $link-color
  &:visited
    color: $visited-color
  &:hover
    text-decoration: none
  &:active
    color: $active-color

::-moz-selection
    background: $select-color
::selection
    background: $select-color

hr
  width: 100%
  margin: 0
  padding: 0
  height: 0
  border: 0
  border-top: 1px solid $border-dark
  border-bottom: 1px solid $border-light
  background-color: $body-color
  &.pagebreak
    margin-top: bem(2)

header[role="banner"]

  .wrap
    height: bem(2)
    display: flex
    align-items: center
    justify-content: space-between

  .homelink
    order: 1
    display: none
    @include font-ratio(20/16)
    a:link, a:visited
      text-decoration: none

  .iconlink
    order: 2
    flex: 1 1 60%
    max-width: 64px
    margin: 0 auto
    img
      height: 24px

  .titlelink
    order: 2
    flex: 1 1 60%
    font-size: bem(1)
    font-family: 'Bungee Shade', $system
    font-weight: 900
    color: $logo-color
    text-align: center
    a:link, a:visited
      color: $logo-color
      text-decoration: none
    a:hover
      text-decoration: none

  .datelink
    order: 3
    display: none
    @include font-ratio(14/16)

main

  article
    margin: bem(2) auto 0 auto
    max-width: $max-width
    @extend .clearfix
    &:not(:first-of-type)
      figure
        padding-top: 0.66em

  aside
    margin-top: bem(2)

    .wrap
      display: flex
      margin-top: bem(1)
      &:first-of-type
        margin-top: bem(2)
      margin-left: auto
      margin-right: auto
      max-width: $max-width
      @extend .clearfix

    .meta
      flex: 1
      padding-right: 1em
      h2
        font-size: 100%
        font-weight: 400
      .datestamp
        @include font-ratio(14/16)
        white-space: nowrap
        a:link, a:visited
          color: $mix-color
          text-decoration: none
        a:hover
          text-decoration: underline

    .image
      position: relative
      width: 80px
      height: 60px
      background-position: center center
      background-repeat: no-repeat
      background-size: cover
      span
        position: absolute
        width: 100%
        height: 100%
        top: 0
        left: 0
        z-index: 1
        background-image: url('/assets/img/shim.gif')

footer
  margin-top: bem(2)

  .wrap
    height: bem(2)
    display: flex
    align-items: center
    justify-content: center

  .nav
    max-width: $max-width
    list-style-type: none
    li
      display: inline
      padding-right: 0.5em
      &:not(:last-of-type):after
        content: "-"
        padding-left: 0.5em
        color: rgba($text-color, 0.4)

//-----------------------------------------------------------------------------

@media screen and (min-width: 40em)

  header[role="banner"]

    .homelink
      display: block
      flex-basis: 20%

    .datelink
      display: block
      flex-basis: 20%
      text-align: right

  main aside .image
    width: 120px
    height: 80px

//-----------------------------------------------------------------------------

@media screen and (min-width: 64em)

  ul, ol
    margin-left: 0
