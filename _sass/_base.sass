/*
  Base styles for every page:
    - header
    - footer
    - most margins
    - pagebreak delimiter for homepage

// Mixins
@function bem($size: 1, $context: $line-height)
  @return ($size * $context) * 1em

@mixin font-ratio($size: 1, $context: $line-height)
    font-size: percentage($size)
    line-height: $context / $size

// Max column width
$max-width: 34em
$line-height: (30/18)

// Colors
$body-color:    #F3F3F3 !default
$text-color:    #161616 !default
$select-color:  #FFC !default

$border-dark:   #D9D9D9 !default
$border-light:  #FFF !default

$mix-color:     mix($body-color, $text-color, 50%) !default
$light-mix:     lighten($mix-color, 20%) !default
$dark-mix:      darken($mix-color, 20%) !default

$link-color:    #36C !default
$visited-color: #939 !default
$active-color:  #F30 !default

// Fonts
$serif: Georgia, Cambria, 'Century Schoolbook L', serif
$sans:  Verdana, 'Bitstream Vera Sans', Geneva, sans-serif
$system: -apple-system, BlinkMacSystemFont, 'Segoe UI', Helvetica, Arial, sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol'
$titlef: 'Bungee', $sans

//-----------------------------------------------------------------------------

html
  box-sizing: border-box

*, *:before, *:after
  box-sizing: inherit

@-ms-viewport
  width: device-width

body
  background-color: $body-color
  color: $text-color

  text-rendering: optimizeSpeed
  -ms-text-size-adjust: auto
  -webkit-text-size-adjust: auto

  padding: 0 1em

ul, ol
  margin-left: bem(1)

ul
  list-style-type: disc

a
  text-decoration: underline
  text-decoration-skip-ink: auto
  &:link
    color: $link-color
  &:visited
    color: $visited-color
  &:hover
    text-decoration: none
  &:active
    color: $active-color

::-moz-selection
    background: $select-color
::selection
    background: $select-color

hr
  width: 100%
  margin: 0
  padding: 0
  height: 0
  border: 0
  border-top: 1px solid $border-dark
  border-bottom: 1px solid $border-light
  background-color: $body-color
  &.pagebreak
    margin-top: bem(2)


main

  article
    margin: bem(2) auto 0 auto
    max-width: $max-width
    @extend .clearfix
    &:not(:first-of-type)
      figure
        padding-top: 0.66em

  aside
    margin-top: bem(2)

    .wrap
      display: flex
      margin-top: bem(1)
      &:first-of-type
        margin-top: bem(2)
      margin-left: auto
      margin-right: auto
      max-width: $max-width
      @extend .clearfix

    .meta
      flex: 1
      padding-right: 1em
      h2
        font-size: 100%
        font-weight: 400
      .datestamp
        @include font-ratio(14/16)
        white-space: nowrap
        a:link, a:visited
          color: $mix-color
          text-decoration: none
        a:hover
          text-decoration: underline

    .image
      position: relative
      width: 80px
      height: 60px
      border-radius: 3px
      background-position: center center
      background-repeat: no-repeat
      background-size: cover
      span
        position: absolute
        width: 100%
        height: 100%
        top: 0
        left: 0
        z-index: 1
        background-image: url('/assets/img/shim.gif')

//-----------------------------------------------------------------------------

@media screen and (min-width: 40em)

  main aside .image
    width: 120px
    height: 80px

//-----------------------------------------------------------------------------

@media screen and (min-width: 64em)

  ul, ol
    margin-left: 0
