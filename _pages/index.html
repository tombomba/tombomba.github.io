---
style: homepage
is_home: true
permalink: /index.html
---
{% assign scope = 2629743 -%}
{% assign today = site.posts.first.date | date: '%s' -%}
<article><!-- 1 month scope -->
{% for p in site.posts %}
  {% assign wc = p.excerpt | number_of_words | times: 1 -%}
  {% assign current = p.date | date: '%s' -%}
  {% assign range = today | times: 1 |  minus: current -%}
  {% if scope > range %}
  <section><!-- #{{ forloop.index }} ({{ wc }} words) -->
    {% assign blurb = p.excerpt | strip | strip_html | normalize_whitespace | smartify -%}
    {% if p.fbog.match %}
      {% assign keyphrase = p.fbog.match | strip | normalize_whitespace | smartify %}
    {% else %}
      {% assign keyphrase = blurb | truncatewords: 3, '' | smartify %}
    {% endif -%}
    {% capture link %}<a href="{{ p.url | prepend: site.url }}">{{ keyphrase }}</a>{% endcapture -%}
    {% unless forloop.first %}<div class="hr"></div>{% endunless %}
    <div class="promo card">
      {% comment %}
      {% if p.fbog.image %}
        <div class="thumb {% if wc > 50 %}large {%endif%}{% cycle 'right', 'left' %}" style="background-image: url({{ p.fbog.image | prepend: site.ico_dir | prepend: site.url }})"><a href="{{ p.url | prepend: site.url }}" aria-label="thumbnail image"><span></span></a></div>
      {% endif -%}
      {% endcomment -%}
      <div class="text">
        <p>{{ blurb | replace_first: keyphrase, link }}</p>
      </div>
    </div>
  </section>
  {% else %}
    {% break %}
  {% endif -%}
{% endfor -%}
</article>

<aside class="archive">
  <div class="hr"></div>
  <ul class="datelist">
    {% assign curryr = site.posts.first.date | date: '%Y' -%}
    {% assign currmo = site.posts.first.date | date: '%-m' -%}
    {% assign startmo = currmo | minus: 0 -%}
    {% assign prevyr = '' -%}
    {% for i in (startmo..currmo) %}
      {% assign month = i -%}
      {% if 1 > month %}
        {% assign month = month | plus: 12 %}
        {% assign year = curryr | minus: 1 %}
      {% else %}
        {% assign year = curryr %}
      {% endif -%}
      {% capture datestring %}1999-{{ month }}-01{% endcapture -%}
      {% if year != prevyr %}
        <li class="year"><a href="/{{ year }}/">{{ year }}</li>
      {% endif -%}
      <li><a href="{{ site.url }}/{{ year }}/{% if 9 > month %}0{% endif %}{{ month }}/">{{ datestring | date: '%b' }}</a></li>
      {% assign prevyr = year -%}
    {% endfor -%}
  </ul>
</aside>
