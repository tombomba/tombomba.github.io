---
layout: default
---

<article>

  {%- assign wordcount = page.content | number_of_words -%}
  {%- comment %}
    !! Cheap hack to prevent widows !!
    Note that the smartify filter will strip &nbsp from string if used later
  {%- endcomment %}
  {%- assign titlef = page.title | smartify | split: ' ' %}
  {%- assign sub = titlef.last | prepend: '!QQ!' %}
  {%- assign titlef = titlef | pop | push: sub | join: ' ' | replace: ' !QQ!', '&nbsp;' %}

  <h1>{{ titlef | default: page.title }}</h1><!-- -->

  {%- if page.media %}{% include media.html media=page.media %}{% endif %}

  <div class="content">
    {{ content }}
  </div>

  <div class="byline">
    <p><em>by</em> <a href="{{ '/about/' | prepend: site.url }}">{{ page.author | default: site.author }}</a></p>
    <p class="datestamp"><a href="{{ page.url | prepend: site.url }}" aria-label="permanent link to this entry"><time pubdate datetime="{{ page.date | date: "%FT%T%:z" }}">{{ page.date | date_to_string }}</time></a></p>
  </div>

  {% if page.previous -%}
  <ul class="previous">
    {% assign nowunix = page.date | date: "%s" | plus: 0 -%}
    {% assign counter = 0 -%}
    {% for post in site.posts -%}
      {% assign posttime = post.date | date: "%s" | plus: 0 -%}
      {% if posttime < nowunix %}
      <li>
        <p><a href="{{ post.url | prepend: site.url }}">{{ post.title | smartify }}</a></p>
        <p>{{ post.date | date_to_string }}</p>
      </li>
      {% assign counter = counter | plus: 1 -%}
      {% endif -%}
    {% if counter >= 3 %}{% break %}{% endif -%}
    {% endfor %}
  </ul>
  {% endif -%}

</article>
