---
style: homepage
is_home: true
permalink: /index.html
---

<article>
{% for p in site.posts limit: 7 %}
{% assign p = site.posts.first -%}

{% assign t = p.title | default: 'Empty?!' | strip | normalize_whitespace | split: ' ' -%}
{% assign sub = t.last | prepend: '!QQ!' -%}
{% assign titlef = t | pop | push: sub | join: ' ' | replace: ' !QQ!', '&nbsp;' -%}

{% assign lastchar = titlef | slice: -1 %}
{% case lastchar %}
  {% when '"' %}
  {% when "'" %}
    {% assign grabstring = titlef.size | times: 1 | minus: 1 %}
    {% assign titlef = titlef | slice: 0, grabstring | append: '.' | append: lastchar %}
  {% when '!' %}
  {% when '?' %}
    {% comment %} do nothing {% endcomment %}
  {% else %}
    {% assign titlef = titlef | append: '.' %}
{% endcase -%}

  <section>
    {% assign blurb = p.excerpt | strip | strip_html | normalize_whitespace | smartify -%}
    {% if p.fbog.match %}
      {% assign keyphrase = p.fbog.match | strip | normalize_whitespace | smartify %}
    {% else %}
      {% assign keyphrase = blurb | truncatewords: 5, '' | smartify %}
    {% endif -%}
    {% capture link %}<a href="{{ p.url | prepend: site.url }}">{{ keyphrase }}</a>{% endcapture -%}

    {% unless forloop.first %}<div class="hr pagebreak"></div>{% endunless %}
    <div class="promo card">
      <div class="text">
        <h1><a href="{{ p.url | prepend: site.url }}">{{ titlef | smartify }}</a></h1>
        <p>{{ blurb | replace_first: keyphrase, link }}</p>
      </div>
    </div>
  </section>
{% endfor -%}
</article>

<aside>
  <div class="hr"></div>
  <div class="morefrom">
    <p><a href="{{ site.posts.first.date | date: '/%Y/' | prepend: site.url }}">[ More from this year ]</a></p>
  </div>
</aside>
