---
layout: default
---

<article>

  {%- assign wordcount = page.content | number_of_words -%}
  {%- comment %}
    !! Cheap hack to prevent widows !!
    Note that the smartify filter will strip &nbsp from string if used later
  {%- endcomment %}
  {%- assign titlef = page.title | smartify | split: ' ' %}
  {%- assign sub = titlef.last | prepend: '!QQ!' %}
  {%- assign titlef = titlef | pop | push: sub | join: ' ' | replace: ' !QQ!', '&nbsp;' %}

  <h1 class="{% if page.media %}md{% else %}lg{% endif %}">{{ titlef | default: page.title }}</h1><!-- -->

  {%- if page.media %}{% include media.html media=page.media %}{% endif %}

  <div class="content">
    {{ content }}
    {% if wordcount > 500 %}<p class="byline">By <a href="{{ '/about/' | prepend: site.url }}">{{ page.author | default: site.author }}</a></p>{% endif -%}
  </div>

  <hr>

  {% if page.previous -%}
  <div class="previous">
    <h2>Previously</h2>
    <p><a href="{{ page.previous.url | prepend: site.url }}">{{ page.previous.title | smartify }}</a>&nbsp;&mdash; {{ page.previous.excerpt | strip_html | smartify | strip | normalize_whitespace | truncate: 280 }}</p>
  </div>

  <hr>
  {% endif -%}

</article>
